
#include <stdio.h>

void input();
void order(int gap,int a[100],int b[100]);


int A1[100];
int A2[100];
int arraySize;
int rotation=0;

void main()
{
    int i;
    input();
    order(1,A1,A2);
     for(i=0;i<arraySize;i++)
    {
        printf(" %d ",A2[i]);
    }
    printf("\n\n");
    
}

void input()
{
    int i=0;
    
    printf("Enter array size\n");
    scanf("%d",&arraySize);
    
    for(i=0;i<arraySize;i++)
    {
        A1[i]=(rand()%200)+1;
    }
    
    for(i=0;i<arraySize;i++)
    {
        A2[i]=201;
    }
    
    for(i=0;i<arraySize;i++)
    {
        printf(" %d ",A1[i]);
    }
    printf("\n\n");
};


void order(int gap,int a[100],int b[100])
{
    int oneStart;
    int oneStop;
    int twoStart;
    int twoStop;
    int endCondition=0;
    int p;
    int q;
    int inject=0;
    int flag1=0;
    int i;
    
   for(oneStart = 0; inject<arraySize ; oneStart = twoStop+1)
   {
       //Assign Values
       oneStop=oneStart+gap-1;
       twoStart=oneStart+gap;
       twoStop=oneStop+gap;
       p=0;
       q=0;
       endCondition=0;
       if(oneStart<arraySize&&twoStart>=arraySize&&flag1==0)
       {
           oneStop=arraySize-1;
           endCondition=1;
           printf("Special Inject \n");
            while((oneStart+p)<=oneStop)
           {
                b[inject]=a[oneStart+p];
                inject++;
                p++;
           }
           flag1=1;
       }
       
    //   printf("oneStart=%d \n",oneStart);
    //   printf("oneStop=%d \n",oneStop);
    //   printf("twoStart=%d \n",twoStart);
    //   printf("twoStop=%d \n",twoStop);
    //   printf("gap=%d \n",gap);
       
       
       //Compare sub-arrays
       while(endCondition==0)
       {
           if(a[oneStart+p]<a[twoStart+q])
           {
               b[inject]=a[oneStart+p];
               inject++;
               p++;
           }
           else
           {
                b[inject]=a[twoStart+q];
                inject++;
                q++;
           }
           
           if((oneStart+p)>oneStop)
           {
               endCondition=1;
               while((twoStart+q)<=twoStop)
               {
                    b[inject]=a[twoStart+q];
                    inject++;
                    q++;
               }
           }
           else if((twoStart+q)>twoStop)
           {
               endCondition=1;
               while((oneStart+p)<=oneStop)
               {
                    b[inject]=a[oneStart+p];
                    inject++;
                    p++;
               }
           }
           printf("inject=%d \n",inject);
         
           
       }
       
         for(i=0;i<arraySize;i++)
            {
                printf(" %d ",b[i]);
            }
         printf("\n\n");
      
   }
   
   if(gap<arraySize/2)
   {
        for(i=0;i<arraySize;i++)
        {
            a[i]=b[i];
        }
        for(i=0;i<arraySize;i++)
        {
            b[i]=201;
        }
        
       order(gap*2,a,b);
   }
   
    
    
};

